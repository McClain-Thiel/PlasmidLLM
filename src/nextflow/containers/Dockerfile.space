# SPACE Pipeline Custom Container
# Contains Python dependencies for PlasmidKit, classification, and export

FROM python:3.11-slim

LABEL maintainer="Plasmid Pretraining Project"
LABEL description="SPACE Pipeline - Python processing container"

# Install system dependencies
RUN apt-get update && apt-get install -y --no-install-recommends \
    git \
    && rm -rf /var/lib/apt/lists/*

# Install Python dependencies
RUN pip install --no-cache-dir \
    pandas>=2.0 \
    pyarrow>=14.0 \
    biopython>=1.83 \
    numpy>=1.24 \
    plasmidkit

# Copy bin scripts (will be mounted at runtime, but include for standalone use)
COPY bin/ /usr/local/bin/

# Make scripts executable
RUN chmod +x /usr/local/bin/*.py 2>/dev/null || true
RUN chmod +x /usr/local/bin/*.sh 2>/dev/null || true

# Set working directory
WORKDIR /data

# Default command
CMD ["python", "--version"]
